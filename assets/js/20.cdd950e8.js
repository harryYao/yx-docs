(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{367:function(t,s,a){"use strict";a.r(s);var n=a(41),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"ä½•ä¸ºè·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½•ä¸ºè·¨åŸŸ"}},[t._v("#")]),t._v(" ä½•ä¸ºè·¨åŸŸï¼Ÿ")]),t._v(" "),a("p",[t._v("é¦–å…ˆï¼Œæˆ‘ä»¬å¾—å…ˆç†è§£ä¸€ä¸‹ä½•ä¸ºè·¨åŸŸï¼Ÿæ‰€è°“è·¨åŸŸï¼Œå³ç½‘ç«™çš„åè®®å protocolï¼ˆä¾‹å¦‚ http ğŸ˜•/ï¼‰ ã€åŸŸå host ï¼ˆä¾‹å¦‚ï¼šwww.example.comï¼‰ã€ç«¯å£å· port (ä¾‹å¦‚ 80 ï¼Œé»˜è®¤ç«¯å£å¯ä»¥çœç•¥) è¿™ä¸‰ä¸ªä¸­çš„ä»»æ„ä¸€ä¸ªä¸åŒï¼Œç½‘ç«™ä¹‹é—´çš„æ•°æ®ä¼ è¾“æˆ–è€…è¯·æ±‚å°±å±äºè·¨åŸŸè¯·æ±‚äº†ã€‚")]),t._v(" "),a("p",[t._v("è¿™æ˜¯ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œä¸ºäº†é˜²èŒƒè·¨ç«™è„šæœ¬çš„æ”»å‡»ï¼Œç¦æ­¢å®¢æˆ·ç«¯è„šæœ¬å¯¹ä¸åŒåŸŸçš„æœåŠ¡è¿›è¡Œè·¨ç«™è°ƒç”¨ï¼Œä½†æ˜¯è·¨åŸŸå¹¶éæµè§ˆå™¨é™åˆ¶äº†å‘èµ·è·¨ç«™è¯·æ±‚ï¼Œè€Œæ˜¯è·¨ç«™è¯·æ±‚å¯ä»¥æ­£å¸¸å‘èµ·ï¼Œä½†è¿”å›ç»“æœè¢«æµè§ˆå™¨æ‹¦æˆªäº†ã€‚æœ‰äº›æµè§ˆå™¨ä¸å…è®¸ä»HTTPSåè®®çš„åŸŸ è·¨åŸŸè®¿é—® HTTPåè®®ï¼Œæ¯”å¦‚Chromeå’ŒFirefoxï¼Œè¿™äº›æµè§ˆå™¨åœ¨è¯·æ±‚è¿˜æœªå‘å‡ºçš„æ—¶å€™å°±ä¼šæ‹¦æˆªè¯·æ±‚ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚å¦‚æœæ˜¯éåŒæºï¼Œå…±æœ‰ä¸‰ç§è¡Œä¸ºå—åˆ°é™åˆ¶ï¼šï¼ˆ1ï¼‰cookieã€LocalStorage å’Œ IndexDB æ— æ³•è¯»å–ï¼›ï¼ˆ2ï¼‰DOM æ— æ³•è·å¾—ï¼›ï¼ˆ3ï¼‰AJAXè¯·æ±‚ä¸èƒ½å‘é€ã€‚")]),t._v(" "),a("p",[t._v("ã€è¿™é‡Œå†è§£é‡Šä¸€ä¸‹åŒæºï¼ˆå…·ä½“å®šä¹‰å¯ä»¥æŸ¥çœ‹ MDNï¼‰ï¼Œå¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’ŒåŸŸåéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„æºã€‚IE æœ‰ä¾‹å¤–ï¼Œä¸€æ˜¯æˆä¿¡èŒƒå›´ï¼šä¸¤ä¸ªç›¸äº’ä¹‹é—´é«˜åº¦äº’ä¿¡çš„åŸŸåï¼Œä¸éµå®ˆåŒæºç­–ç•¥çš„é™åˆ¶ï¼›äºŒæ˜¯ç«¯å£ï¼šIE æœªå°†ç«¯å£å·åŠ å…¥åˆ°åŒæºç­–ç•¥çš„ç»„æˆæˆåˆ†ä¸­ã€‚æ›´å¤šæœ‰å…³æºçš„ä»‹ç»å¯ä»¥æŸ¥çœ‹ MDN ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policyã€‘")]),t._v(" "),a("h2",{attrs:{id:"å¦‚ä½•å»è§£å†³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•å»è§£å†³"}},[t._v("#")]),t._v(" å¦‚ä½•å»è§£å†³ï¼Ÿ")]),t._v(" "),a("p",[t._v("æ¥ç€ï¼Œæ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†ä½•ä¸ºè·¨åŸŸï¼Œè·¨è¶Šæœ‰æ—¶å€™åœ¨å®é™…çš„å¼€å‘ä¸­æœ‰æ—¶å€™åˆæ— æ³•é¿å…ï¼Œä¸‹é¢ä»‹ç»å‡ ç§å¸¸è§çš„è·¨åŸŸæ–¹æ³•ï¼š")]),t._v(" "),a("h3",{attrs:{id:"_1ã€åˆ©ç”¨-jsonp-å®ç°è·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€åˆ©ç”¨-jsonp-å®ç°è·¨åŸŸ"}},[t._v("#")]),t._v(" 1ã€åˆ©ç”¨ JSONP å®ç°è·¨åŸŸ")]),t._v(" "),a("p",[t._v("JSONP ï¼ˆJSON with Paddingï¼‰æ˜¯ JSON çš„ä¸€ç§â€œä½¿ç”¨æ¨¡å¼â€ã€‚åˆ©ç”¨ JSON å®ç°è·¨åŸŸçš„åŸç†æ˜¯ï¼šHTML çš„ script æ ‡ç­¾æ˜¯ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶çš„ï¼Œå¯ä»¥é€šè¿‡ script æ ‡ç­¾åŠ è½½å¹¶æ‰§è¡Œå…¶ä»–çš„åŸŸçš„ js æ–‡ä»¶çš„ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚é€šè¿‡ jQery å°è£…çš„æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œ JSONP çš„æ“ä½œï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://jjjjjjjj.com/data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éœ€è¦æäº¤ç»™æœåŠ¡ç«¯çš„æ•°æ®:")]),t._v("\n  data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç‡•å­'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å®šæ•°æ®ç±»å‹:")]),t._v("\n  dataType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jsonp'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ•°æ®è·å–å¤±è´¥ï¼'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä½¿ç”¨$.getJSON")]),t._v("\n$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://jjjjjjjj.com/data?callback=?,function(data)'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¤„ç†è·å¾—çš„jsonæ•°æ®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("æ€»ç»“ï¼š\nJSONP çš„å…¼å®¹æ€§å¥½ï¼Œåœ¨æ›´å¤è€çš„æµè§ˆå™¨éƒ½å¯ä»¥è¿è¡Œï¼Œä¸éœ€è¦ XMLHTTPRequest æˆ– ActiveX çš„æ”¯æŒï¼Œå¹¶ä¸”åœ¨è¯·æ±‚å®Œæ¯•åå¯ä»¥é€šè¿‡è°ƒç”¨ callback çš„æ–¹å¼å›ä¼ ç»“æœï¼›\nç„¶è€Œç¼ºç‚¹æ˜¯ï¼Œå®ƒåªæ”¯æŒ GET è¯·æ±‚ è€Œä¸æ”¯æŒ POST ç­‰å…¶ä»–ç±»å‹çš„ HTTP è¯·æ±‚ï¼›è¿˜æœ‰ åªæ”¯æŒè·¨åŸŸ HTTP è¯·æ±‚è¿™ç§æƒ…å†µï¼Œä¸èƒ½è§£å†³ä¸åŒåŸŸçš„ä¸¤ä¸ªé¡µé¢çš„ä¹‹é—´ JavaScript è°ƒç”¨çš„é—®é¢˜ï¼›")]),t._v(" "),a("h3",{attrs:{id:"_2ã€åˆ©ç”¨-cors-å®ç°è·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€åˆ©ç”¨-cors-å®ç°è·¨åŸŸ"}},[t._v("#")]),t._v(" 2ã€åˆ©ç”¨ CORS å®ç°è·¨åŸŸ")]),t._v(" "),a("p",[t._v("CORS ï¼ˆCross-Origin Resource Sharingï¼‰è·¨åŸŸèµ„æºå…±äº«ï¼Œå®šä¹‰äº†å¿…é¡»åœ¨è®¿é—®è·¨åŸŸèµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¸æœåŠ¡å™¨åº”è¯¥å¦‚ä½•æ²Ÿé€šã€‚CORS èƒŒåçš„æ€æƒ³æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„ HTTP å¤´éƒ¨ï¼Œè®©æœåŠ¡å™¨èƒ½å£°æ˜å“ªäº›æ¥æºå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®è¯¥æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œä»è€Œå†³å®šè¯·æ±‚æˆ–å“åº”æ˜¯åº”è¯¥æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼ŒCORS æœ¬èº«å¹¶éç»å¯¹çš„å®‰å…¨ï¼Œå¯åˆ©ç”¨ OAuth2 åŠ å¼ºä¿éšœã€‚ï¼ˆæ›´å¤šå…³äº CORS çš„è¯¦è§£å¯ä»¥æŸ¥çœ‹ é˜®ä¸€å³°è€å¸ˆçš„ä¸€ç¯‡æ–‡ç« ï¼šè·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ï¼‰")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("header")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin: *"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//â€œ*â€å·è¡¨ç¤ºå…è®¸ä»»ä½•åŸŸå‘æˆ‘ä»¬çš„æœåŠ¡ç«¯æäº¤è¯·æ±‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("header")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin: http://jjjjj.jd.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä¹Ÿå¯ä»¥è®¾ç½®æŒ‡å®šçš„åŸŸå")]),t._v("\n")])])]),a("p",[t._v("ä¸ JSONP ç›¸æ¯”ï¼ŒCORS æ›´ä¸ºå…ˆè¿›ã€æ–¹ä¾¿ï¼š\nCORS æ”¯æŒæ‰€æœ‰ç±»å‹çš„ HTTP è¯·æ±‚ï¼›\nä½¿ç”¨CORSï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨æ™®é€šçš„XMLHttpRequestå‘èµ·è¯·æ±‚å’Œè·å¾—æ•°æ®ï¼Œæ¯”èµ·JSONPæœ‰æ›´å¥½çš„é”™è¯¯å¤„ç†ï¼›\nç»å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨éƒ½å·²ç»æ”¯æŒäº†CORSï¼›")]),t._v(" "),a("h3",{attrs:{id:"_3ã€window-name-iframe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€window-name-iframe"}},[t._v("#")]),t._v(" 3ã€window.name + iframe")]),t._v(" "),a("p",[t._v("å½“window çš„ loaction å˜åŒ–æ—¶ï¼Œé¡µé¢é‡æ–°åŠ è½½ï¼Œå®ƒçš„ name å±æ€§å¯ä»¥ä¾ç„¶ä¿æŒä¸å˜ã€‚æ¯ä¸ªé¡µé¢çš„å¯¹ window.name éƒ½æœ‰è¯»å†™æƒé™ï¼Œwindow.name æ˜¯æŒä¹…å­˜åœ¨ä¸€ä¸ªçª—å£è½½å…¥è¿‡æ‰€æœ‰é¡µé¢ä¸­çš„ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ Aä¸­ç”¨iframeåŠ è½½å…¶ä»–åŸŸçš„é¡µé¢Bï¼Œè€Œé¡µé¢Bä¸­ç”¨JavaScriptæŠŠéœ€è¦ä¼ é€’çš„æ•°æ®èµ‹å€¼ç»™window.nameï¼ŒiframeåŠ è½½å®Œæˆä¹‹åï¼ˆiframe.onloadï¼‰ï¼Œé¡µé¢Aä¿®æ”¹iframeçš„åœ°å€ï¼Œå°†å…¶å˜æˆåŒåŸŸçš„ä¸€ä¸ªåœ°å€ï¼Œç„¶åå°±å¯ä»¥è¯»å‡ºiframeçš„window.nameçš„å€¼äº†ï¼ˆå› ä¸ºAä¸­çš„window.nameå’Œiframeä¸­çš„window.nameäº’ç›¸ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åœ¨Aä¸­è·å–window.nameï¼Œè€Œè¦é€šè¿‡iframeè·å–å…¶window.nameï¼‰ã€‚è¿™ä¸ªæ–¹å¼éå¸¸é€‚åˆå•å‘çš„æ•°æ®è¯·æ±‚ï¼Œè€Œä¸”åè®®ç®€å•ã€å®‰å…¨ã€‚ä¸ä¼šåƒJSONPé‚£æ ·ä¸åšé™åˆ¶åœ°æ‰§è¡Œå¤–éƒ¨è„šæœ¬ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_4ã€document-domain-è·¨åŸŸ-åªé€‚ç”¨äºä¸åŒå­åŸŸçš„æ¡†æ¶é—´çš„äº¤äº’"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€document-domain-è·¨åŸŸ-åªé€‚ç”¨äºä¸åŒå­åŸŸçš„æ¡†æ¶é—´çš„äº¤äº’"}},[t._v("#")]),t._v(" 4ã€document.domain è·¨åŸŸï¼ˆåªé€‚ç”¨äºä¸åŒå­åŸŸçš„æ¡†æ¶é—´çš„äº¤äº’ï¼‰")]),t._v(" "),a("p",[t._v("åˆ©ç”¨document.domain å®ç°è·¨åŸŸï¼š\nå‰ææ¡ä»¶ï¼šè¿™ä¸¤ä¸ªåŸŸåå¿…é¡»å±äºåŒä¸€ä¸ªåŸºç¡€åŸŸå!è€Œä¸”æ‰€ç”¨çš„åè®®ï¼Œç«¯å£éƒ½è¦ä¸€è‡´ï¼Œå¦åˆ™æ— æ³•åˆ©ç”¨document.domainè¿›è¡Œè·¨åŸŸ.")]),t._v(" "),a("p",[t._v("åŒæºç­–ç•¥ä¸èƒ½ç”¨ ajax æ–¹æ³•å»è¯·æ±‚ä¸åŒæºçš„æ–‡æ¡£ï¼Œè¿˜æœ‰ä¸€ä¸ªé™åˆ¶å°±æ˜¯æµè§ˆå™¨ä¸åŒåŸŸçš„æ¡†æ¶ä¹‹é—´ä¸èƒ½è¿›è¡Œ JS çš„äº¤äº’æ“ä½œçš„ï¼Œä¸åŒçš„æ¡†æ¶å¯ä»¥è·å– window å¯¹è±¡ï¼Œä½†æ— æ³•è·å–ç›¸åº”çš„å±æ€§å’Œæ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŠŠä¸¤ä¸ªé¡µé¢çš„ document.domain éƒ½è®¾æˆç›¸åŒçš„åŸŸåå°±å¯ä»¥ï¼Œä¸è¿‡ window.domain çš„è®¾ç½®ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œåªèƒ½æŠŠ window.domain è®¾ç½®æˆè‡ªèº«æˆ–æ›´é«˜ä¸€çº§çš„çˆ¶åŸŸï¼Œä¸”ä¸»åŸŸå¿…é¡»ç›¸åŒ")]),t._v(" "),a("h3",{attrs:{id:"_5ã€html5-çš„-postmessage-æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5ã€html5-çš„-postmessage-æ–¹æ³•"}},[t._v("#")]),t._v(" 5ã€HTML5 çš„ postMessage æ–¹æ³•")]),t._v(" "),a("p",[t._v('é«˜çº§æµè§ˆå™¨Internet Explorer 8+, chromeï¼ŒFirefox , Opera å’Œ Safari éƒ½å°†æ”¯æŒè¿™ä¸ªåŠŸèƒ½ã€‚è¿™ä¸ªåŠŸèƒ½ä¸»è¦åŒ…æ‹¬æ¥å—ä¿¡æ¯çš„"message"äº‹ä»¶å’Œå‘é€æ¶ˆæ¯çš„"postMessage"æ–¹æ³•ã€‚')]),t._v(" "),a("p",[t._v("window.postMessage() æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šåœ¨æ‰€æœ‰é¡µé¢è„šæœ¬æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ˆä¾‹å¦‚ï¼šåœ¨è¯¥æ–¹æ³•ä¹‹åè®¾ç½®çš„äº‹ä»¶ã€ä¹‹å‰è®¾ç½®çš„timeout äº‹ä»¶ï¼‰å‘ç›®æ ‡çª—å£æ´¾å‘ä¸€ä¸ª MessageEvent æ¶ˆæ¯ã€‚ è¯¥ MessageEvent æ¶ˆæ¯æœ‰å››ä¸ªå±æ€§éœ€è¦æ³¨æ„ï¼š message å±æ€§è¡¨ç¤ºè¯¥ message çš„ç±»å‹ï¼› data å±æ€§ä¸º window.postMessage çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼›origin å±æ€§è¡¨ç¤ºè°ƒç”¨ window.postMessage() æ–¹æ³•æ—¶è°ƒç”¨é¡µé¢çš„å½“å‰çŠ¶æ€ï¼› source å±æ€§è®°å½•è°ƒç”¨ window.postMessage() æ–¹æ³•çš„çª—å£ä¿¡æ¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¼¹å‡ºä¸€ä¸ªæ–°çª—å£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" domain "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://scriptandstyle.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myPopup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("domain \n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/windowPostMessageListener.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myWindow'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å‘¨æœŸæ€§çš„å‘é€æ¶ˆæ¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello!  The time is: '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blog.local:  sending message:  '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//send the message and target URI")]),t._v("\n\tmyPopup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç›‘å¬æ¶ˆæ¯åé¦ˆ")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://scriptandstyle.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'received response:  '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä½œè€…ï¼šYanzery\né“¾æ¥ï¼šhttps://www.jianshu.com/p/79daa0d45aac\næ¥æºï¼šç®€ä¹¦\nè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);